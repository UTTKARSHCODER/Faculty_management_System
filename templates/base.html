{% url 'home' as home %}
{% url 'profile' as profile %}
{% url 'allocated-batches' as allocated_batches %}
{% url 'student-directory' as student_directory %}
{% url 'about' as about %}
{% url 'fdp' as fdp %}
{% url 'progress' as progress %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Information Website</title>
    <link rel = "icon" type = "image/png" href = "/static/top-head-logo.png">

    <!-- <link rel="stylesheet" href="responsive.css"> -->
    <!-- Latest compiled and minified CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/217508c9b2.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
  </head>
  <body class ="h-100">
    <div class="container-fluid" style = "background-color: #2F3E46">
        <div class="row">
            <div class="col-1">
                <img src = "/static/skit_logo.png" alt="SKIT LOGO" style = "height:80px; width:96px">
            </div>
            <div class="col-9 mt-2 ms-5" >
                <h3 class = "text-white text-nowrap mt-3" style = "font-weight: bold;">Swami Keshvanand Institute of Technology, Management & Gramothan(SKIT)</h3>
            </div>
            <!-- Role-Specifier -->
            <div class="col-1 ms-5 mt-2">
                <div class="d-flex justify-content-end">
                    {% if request.session.topLeftBar is not None %}

                    <button type="button" class="text-white dropdown-toggle ms-5 mt-3" data-bs-toggle="dropdown" style = "background: #2F3E46"><i class = "fa-regular fa-user text-white"></i>
                        {% if request.session.topLeftBar ==  'spa' %}
                        SuperAdmin
                        {% elif request.session.topLeftBar ==  'ad' %}
                         Admin
                        {% elif request.session.topLeftBar ==  'fa' %}
                        Faculty
                        {% elif request.session.topLeftBar ==  'student' %}
                        Student
                        {% else %}
                        Unknown</button>
                        {% endif %}
                    <ul class = "dropdown-menu">
                        <li><span style = "display: flex;"><i class = "fa-solid fa-right-from-bracket" style = "margin-top: 11px; margin-left: 15px;"></i><a class="dropdown-item" href="{% url 'logout' %}" id = "forceLogoutRedirect" style = "padding-left: 5px;">Logout</a></span></li>
                    </ul>
                    {% else %}
                    <button type="button" class="btn btn-primary dropdown-toggle text-center ms-5 mt-3" data-bs-toggle="dropdown">
                        User
                    </button>
                    <ul class="dropdown-menu">
                        <li><span style = "display: flex;"><i class = "fa-solid fa-user" style = "margin-top: 7px; margin-left: 5px;"></i><a class="dropdown-item" href="/login?post=spa">SuperAdmin</a></span></li>
                        <li><span style = "display: flex;"><i class = "fa-solid fa-user" style = "margin-top: 7px; margin-left: 5px;"></i><a class="dropdown-item" href="/login?post=ad">Admin</a></span></li>
                        <li><span style = "display: flex;"><i class = "fa-solid fa-user" style = "margin-top: 7px; margin-left: 5px;"></i><a class="dropdown-item" href="/login?post=fa">Faculty</a></span></li>
                        <li><span style = "display: flex;"><i class = "fa-solid fa-user" style = "margin-top: 7px; margin-left: 5px;"></i><a class="dropdown-item" href="/login?post=student">Student</a></span></li>
                    </ul>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
<!--    <div class="container-fluid w-100" style="&#45;&#45;bs-gutter-x: 0;">-->
        <!-- left nav sec  -->
    <main class = "d-flex flex-column" style = "min-height: 64.20vh">
    <div class="row" style = "--bs-gutter-x: 0; flex-grow: 1;">
        <div class="col-2" style="width: auto">
              <nav class="navbar h-100" style = "background-color: #2F3E46; width: 100%; align-content: space-between;">
                    <ul class="navbar-nav text-dark">
                        <a href="/" style = "text-decoration: none;"><li class="nav-item text-white {% if request.path == home or '/batch/' in request.path %} active {% endif %}" id = "home">Home</li></a>
                        {% if request.session.topLeftBar %}
                        <a href="/profile" style = "text-decoration: none;"><li class = "nav-item text-white {% if request.path == profile %} active {% endif %}" id = "directory">Profile</li></a>
                        <a href="/allocated_batches" style = "text-decoration: none;"><li class="nav-item text-white {% if request.path == allocated_batches %} active {% endif %}" id = "profile">Allocated Batches</li></a>
                        <a href="/student_directory" style = "text-decoration: none;"><li class="nav-item text-white {% if request.path == student_directory %} active {% endif %}" id = "faculty_report">Student Directory</li></a>
                        <a href="/fdp" style = "text-decoration: none;"><li class="nav-item text-white {% if request.path == fdp or 'all_forms' in request.path %} active {% endif %}" id = "faculty_development">FDP Forms</li></a>
                        <a href="/progress" style = "text-decoration: none;"><li class="nav-item text-white {% if request.path == progress %} active {% endif %}" id = "progress">Progress</li></a>
                        {% endif %}
                        <a href="/about" style = "text-decoration: none;"><li class="nav-item text-white {% if request.path == about %} active {% endif %}" id = "about_us">About Us</li></a>
                    </ul>
              </nav>
        </div>
        {% block content %}

        {% endblock %}
    </div>
        <script>
            document.getElementById('forceLogoutRedirect').addEventListener('click', function(event) {
                // 1. Let Bootstrap do its thing (close the dropdown menu)
                // event.preventDefault(); // You don't need this if Bootstrap already uses it

                // 2. Immediately force the browser to navigate to the desired URL.
                // Use the href attribute of the link you just clicked.
                const targetUrl = this.getAttribute('href');

                // Use a small delay for maximum compatibility, ensuring the dropdown closes visually
                setTimeout(function() {
                    window.location.href = targetUrl;
                }, 50); // 50 milliseconds is usually enough
            });
        </script>
    </main>
    <style>
        .nav-item{
            padding: 20px;
            font-size: 18px;
        }
        .nav-item.active {
            background-color: #007bff;
            color: white;
            border-radius: 5px;
            margin: 4px;
        }
    </style>
    {% include 'footer.html' %}
<!--    </div>-->
    <!-- container replaced content -->
<!--    <header class="header-section">-->
<!--        <div class="left-logo">-->
<!--          <img src="/assets/image/skit_logo.png" alt="logo-avtar"/>-->
<!--        </div>-->
<!--        <div class="collage-name">-->
<!--          Swami Keshvanand Institute of Technology, Management & Gramothan-->
<!--          (SKIT)-->
<!--        </div>-->
<!--        <div class="user-details">-->
<!--            <?php-->
<!--             if (!isset($_SESSION['topLeftBar'])) { ?>-->
<!--              <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">-->
<!--                User-->
<!--              </button>-->
<!--              <ul class="dropdown-menu">-->
<!--                <li><span style = "display: flex;"><i class = "fa-solid fa-user" style = "margin-top: 7px; margin-left: 5px;"></i><a class="dropdown-item" href="/login?post=admin">Admin</a></span></li>-->
<!--                <li><span style = "display: flex;"><i class = "fa-solid fa-user" style = "margin-top: 7px; margin-left: 5px;"></i><a class="dropdown-item" href="/login?post=faculty">Faculty</a></span></li>-->
<!--              </ul><?php-->
<!--              } else if(isset($_SESSION['topLeftBar'])){ ?>-->
<!--                <i class = "fa-regular fa-user text-white"></i>-->
<!--                <button type="button" class="text-white dropdown-toggle" data-bs-toggle="dropdown" style = "background: #2F3E46">-->
<!--                <?php if($_SESSION['topLeftBar'] === "admin") { echo "Admin";} else if($_SESSION['topLeftBar'] === "faculty") { echo "Faculty"; } else {unset($_SESSION['topLeftBar']);}?>-->
<!--              </button>-->
<!--              <ul class="dropdown-menu" style = "width: 390px; margin-top: 10px;">-->
<!--                <link rel="stylesheet" href="/assets/css/profile.css"/>-->
<!--                <li>-->
<!--                <div class = "container-specific">-->
<!--                    <?php-->
<!--                    if (isset($_SESSION['userEmail'])) {-->
<!--                        $email = $_SESSION['userEmail'];-->
<!--                        $sql = "SELECT `salutation`,`name`,`designation`,`department`,`email`,`contact_number`,`address`,`profile_path` FROM `detailed_faculty_info` WHERE `detailed_faculty_info`.`email` = '" . $email . "'";-->
<!--                        $result = mysqli_query($conn,$sql);-->
<!--                        if(mysqli_num_rows($result) > 0) {-->
<!--                            $row = mysqli_fetch_assoc($result);-->
<!--                        ?>-->
<!--                            <div class =" col-12 ms-auto d-flex">-->
<!--                                <a href = "/sign_in_form?job=save" style = "text-decoration: none; margin-left: 15px;" class = "d-flex"><i class = "fa-solid fa-pen" style="font-size: 15px; margin-top: 5px"></i>-->
<!--                                <h4>Edit</h4></a>-->
<!--                            </div>-->
<!--                            <div class="container-specific">-->
<!--                                <a href = "/assets/php/profile_page" style="text-decoration: none;">-->
<!--                                <div class="card-profile">-->
<!--                                    <div class="image-card">-->
<!--                                        <p>-->
<!--                                            Click the card to view more details!-->
<!--                                        </p>-->
<!--                                        <img src=<?= $row['profile_path'];?> alt="profile-pic">-->
<!--                                        <h2 class = "mt-3"><?= $row['salutation'] . ' ' . $row['name'] ?></h2>-->
<!--                                    </div>-->
<!--                                </div></a>-->
<!--                            </div>-->
<!--                            <?php }-->
<!--                        } else { ?>-->
<!--                            <div class = "container-specific h-25 bg-white text-center" style = "margin-top: 200px;">-->
<!--                                <a href = "logout" class = "text-center">You are not authorized. Log in through Top Right dropdown.</a>-->
<!--                            </div>-->
<!--                            <?php-->
<!--                        }-->
<!--                        ?>-->
<!--                </div></li>-->
<!--                <li><span style = "display: flex;"><i class = "fa-solid fa-right-from-bracket" style = "margin-top: 11px; margin-left: 15px;"></i><a class="dropdown-item" href="/assets/php/logout" style = "padding-left: 5px;">Logout</a></span></li>-->
<!--              </ul> <?php-->
<!--              }-->
<!--            ?>-->
<!--        </div>-->

<!--      </header>-->
      <!-- main section -->
<!--      <div class="content-box">-->

<!--          <input type="checkbox" id="check" class="che_box" style="display: none"/>-->

<!--          <div class="btn_one">-->
<!--              <label for="check">-->
<!--                  <i class="fa-solid fa-bars" style = "margin-top: 235px; margin-left: 10px"></i>-->
<!--              </label>-->
<!--          </div>-->

<!--          <div class="btn_two">-->
<!--              <label for="check">-->
<!--                  <i class="fa-solid fa-bars" style = "margin-top: 235px; margin-left: 10px"></i>-->
<!--              </label>-->
<!--          </div>-->


